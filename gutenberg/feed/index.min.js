!function(wp){var registerBlockType=wp.blocks.registerBlockType,el=wp.element.createElement,__=wp.i18n.__;const{useSelect:useSelect}=wp.data,{RadioControl:RadioControl,ToggleControl:ToggleControl,SelectControl:SelectControl,PanelBody:PanelBody}=wp.components,{useBlockProps:useBlockProps,RichText:RichText,InnerBlocks:InnerBlocks,InspectorControls:InspectorControls}=wp.blockEditor;registerBlockType("wpboiler-core/feed",{apiVersion:2,title:__("Feed","feed"),description:__("Displays latest posts","feed"),category:"design",icon:"pressthis",supports:{html:!1},attributes:{postType:{type:"string",default:"custom"},categoryID:{type:"string",default:"-1"},heading:{type:"string",default:""},marginselect:{type:"string",default:"margins__none"},doubleMargins:{type:"boolean",default:!1}},edit:function(props){const{attributes:attributes,setAttributes:setAttributes,clientId:clientId}=props,{heading:heading,marginselect:marginselect,doubleMargins:doubleMargins,postType:postType,categoryID:categoryID}=attributes,decodeHtml=function(html){var txt=document.createElement("textarea");return txt.innerHTML=html,txt.value};let datalistOptions=[];wpboilerFeedCategories.forEach(elm=>{datalistOptions.push({value:elm.ID,label:decodeHtml(elm.name)})});const onChangeMarginSelect=value=>setAttributes({marginselect:value}),onChangeDoubleMarginsSelect=()=>setAttributes({doubleMargins:!doubleMargins}),innerBlockCount=useSelect(select=>select("core/block-editor").getBlock(clientId).innerBlocks);return el("div",useBlockProps(attributes),el("p",{className:"block__title"},__("Feed","feed")),el(InspectorControls,null,el(PanelBody,{title:"Margins"},el(RadioControl,{selected:marginselect,options:[{label:"No Margins",value:"margins__none"},{label:"Margins Top & Bottom",value:"margins__topBottom"},{label:"Top Margin Only",value:"margins__top"},{label:"Bottom Margin Only",value:"margins__bottom"}],onChange:onChangeMarginSelect})),el(PanelBody,{title:"Double Margins?"},el(ToggleControl,{label:"Double Margins",checked:doubleMargins,onChange:onChangeDoubleMarginsSelect}))),el("section",{className:"feed"},el("div",{className:"feed__container"},el(RichText,{tagName:"h2",placeholder:"Enter a heading here...",className:"",value:heading||"",onChange:value=>setAttributes({heading:value})}),el("div",{className:"feed__type--select"},el(SelectControl,{label:"Select the type of feed you want to show",value:postType,options:[{label:"Custom",value:"custom"},{label:"Set Category",value:"category"}],onChange:val=>setAttributes({postType:val})})),"custom"===postType?el("div",{className:"feed__container"},el("h4",{},"Choose Posts to Display (Max. 2)"),innerBlockCount.length>=2?el(InnerBlocks,{allowedBlocks:["wpboiler-core/feed-item"],template:[["wpboiler-core/feed-item"]],templateLock:!1,renderAppender:!1}):el(InnerBlocks,{allowedBlocks:["wpboiler-core/feed-item"],template:[["wpboiler-core/feed-item"]],templateLock:!1})):el("div",{className:"feed__type--select"},el(SelectControl,{label:"Category",value:categoryID,options:datalistOptions,onChange:val=>setAttributes({categoryID:val})})))))},save:function(){return el(InnerBlocks.Content,{})}})}(window.wp);